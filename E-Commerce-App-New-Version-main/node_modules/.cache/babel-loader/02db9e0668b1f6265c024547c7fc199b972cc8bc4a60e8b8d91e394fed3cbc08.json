{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pedroagarcia/E-commerce-App-Improved-Css/E-Commerce-App-New-Version-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/pedroagarcia/E-commerce-App-Improved-Css/E-Commerce-App-New-Version-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/pedroagarcia/E-commerce-App-Improved-Css/E-Commerce-App-New-Version-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import the useState hook from React\nimport{useState}from\"react\";import{useNavigate}from\"react-router-dom\";// create a Signing component, and ensure it is the default export.\n// deconsruct SignUpForm()\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(_ref){var token=_ref.token,setToken=_ref.setToken;// create three state variables for our form inputs: username, password, and error. Their default values should be \"\", \"\" and null, respectively.\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var navigate=useNavigate();var logIn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username,password){var response,result,_token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://fakestoreapi.com/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;console.log(result.token);_token=result.token;window.localStorage.setItem(\"token\",_token);return _context.abrupt(\"return\",_token);case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function logIn(_x,_x2){return _ref2.apply(this,arguments);};}();function handleSubmit(_x3){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();// console.log(\"Hello ðŸ‘‹\");\n// try {\n// console.log(\"Hola\");\n_context2.next=3;return logIn(username,password);case 3:response=_context2.sent;result=response;token=result.token;setToken(token);navigate(\"/login\");// }\nconsole.log(response);// console.log(\"Hola\");\n// } catch (error) {\n//   setError(error.message);\n// }\ncase 9:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"m-2\",children:\"Login:\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"m-2\",children:[error&&/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Username:\",\"\",/*#__PURE__*/_jsx(\"input\",{className:\"flex justify-center items-center\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",\"\",/*#__PURE__*/_jsx(\"input\",{className:\"flex justify-center items-center\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-300 flex p-4 justify-center items-center text-primary w-full font-medium\",children:\"Submit\"})]})]})]});}","map":{"version":3,"names":["useState","useNavigate","Login","token","setToken","username","setUsername","password","setPassword","error","setError","navigate","logIn","fetch","method","headers","body","JSON","stringify","response","json","result","console","log","window","localStorage","setItem","handleSubmit","event","preventDefault","e","target","value"],"sources":["/Users/pedroagarcia/E-commerce-App-Improved-Css/E-Commerce-App-New-Version-main/src/components/Login.js"],"sourcesContent":["// import the useState hook from React\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n// create a Signing component, and ensure it is the default export.\n// deconsruct SignUpForm()\n\nexport default function Login({ token, setToken }) {\n  // create three state variables for our form inputs: username, password, and error. Their default values should be \"\", \"\" and null, respectively.\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const logIn = async (username, password) => {\n    try {\n      const response = await fetch(`https://fakestoreapi.com/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          username: username,\n          password: password,\n        }),\n      });\n      const result = await response.json();\n      console.log(result.token);\n      const token = result.token;\n      window.localStorage.setItem(\"token\", token);\n      return token;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    // console.log(\"Hello ðŸ‘‹\");\n\n    // try {\n    // console.log(\"Hola\");\n    const response = await logIn(username, password);\n    const result = response;\n    token = result.token;\n    setToken(token);\n    navigate(\"/login\");\n    // }\n    console.log(response);\n    // console.log(\"Hola\");\n    // } catch (error) {\n    //   setError(error.message);\n    // }\n  }\n  return (\n    <>\n      <h2 className=\"m-2\">Login:</h2>\n      <section className=\"m-2\">\n        {error && <p>{error}</p>}\n        <form onSubmit={handleSubmit}>\n          <label>\n            Username:{\"\"}\n            <input\n              className=\"flex\n          justify-center items-center\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n          </label>\n          <label>\n            Password:{\"\"}\n            <input\n              className=\"flex\n          justify-center items-center\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </label>\n          <button\n            className=\"bg-gray-300 flex p-4 justify-center\n          items-center text-primary w-full font-medium\"\n          >\n            Submit\n          </button>\n        </form>\n      </section>\n    </>\n  );\n}\n"],"mappings":"+fAAA;AACA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C;AACA;AAAA,6IAEA,cAAe,SAASC,MAAK,MAAsB,IAAnBC,MAAK,MAALA,KAAK,CAAEC,QAAQ,MAARA,QAAQ,CAC7C;AAEA,cAAgCJ,QAAQ,CAAC,EAAE,CAAC,wCAArCK,QAAQ,eAAEC,WAAW,eAC5B,eAAgCN,QAAQ,CAAC,EAAE,CAAC,yCAArCO,QAAQ,eAAEC,WAAW,eAC5B,eAA0BR,QAAQ,CAAC,IAAI,CAAC,yCAAjCS,KAAK,eAAEC,QAAQ,eACtB,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAC9B,GAAMW,MAAK,6FAAG,iBAAOP,QAAQ,CAAEE,QAAQ,qLAEZM,MAAK,uCAAwC,CAClEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBb,QAAQ,CAAEA,QAAQ,CAClBE,QAAQ,CAAEA,QACZ,CAAC,CACH,CAAC,CAAC,QATIY,QAAQ,qCAUOA,SAAQ,CAACC,IAAI,EAAE,QAA9BC,MAAM,eACZC,OAAO,CAACC,GAAG,CAACF,MAAM,CAAClB,KAAK,CAAC,CACnBA,MAAK,CAAGkB,MAAM,CAAClB,KAAK,CAC1BqB,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEvB,MAAK,CAAC,CAAC,gCACrCA,MAAK,4DAEZmB,OAAO,CAACb,KAAK,aAAO,CAAC,qEAExB,kBApBKG,MAAK,iDAoBV,CAAC,QAEae,aAAY,mJAA3B,kBAA4BC,KAAK,4IAC/BA,KAAK,CAACC,cAAc,EAAE,CACtB;AAEA;AACA;AAAA,uBACuBjB,MAAK,CAACP,QAAQ,CAAEE,QAAQ,CAAC,QAA1CY,QAAQ,gBACRE,MAAM,CAAGF,QAAQ,CACvBhB,KAAK,CAAGkB,MAAM,CAAClB,KAAK,CACpBC,QAAQ,CAACD,KAAK,CAAC,CACfQ,QAAQ,CAAC,QAAQ,CAAC,CAClB;AACAW,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC,CACrB;AACA;AACA;AACA;AAAA,wDACD,+CACD,mBACE,wCACE,WAAI,SAAS,CAAC,KAAK,oBAAY,cAC/B,iBAAS,SAAS,CAAC,KAAK,WACrBV,KAAK,eAAI,mBAAIA,KAAK,EAAK,cACxB,cAAM,QAAQ,CAAEkB,YAAa,wBAC3B,qCACY,EAAE,cACZ,cACE,SAAS,CAAC,kCACc,CACxB,KAAK,CAAEtB,QAAS,CAChB,QAAQ,CAAE,kBAACyB,CAAC,QAAKxB,YAAW,CAACwB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAC7C,GACI,cACR,qCACY,EAAE,cACZ,cACE,SAAS,CAAC,kCACc,CACxB,IAAI,CAAC,UAAU,CACf,KAAK,CAAEzB,QAAS,CAChB,QAAQ,CAAE,kBAACuB,CAAC,QAAKtB,YAAW,CAACsB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAC7C,GACI,cACR,eACE,SAAS,CAAC,kFACiC,oBAGpC,GACJ,GACC,GACT,CAEP"},"metadata":{},"sourceType":"module","externalDependencies":[]}